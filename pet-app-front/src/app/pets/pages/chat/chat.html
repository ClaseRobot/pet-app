
<section class="flex items-center justify-center min-h-screen bg-gray-100">

    <div class="w-full max-w-2xl bg-white rounded-xl shadow-2xl flex flex-col h-[600px] overflow-hidden">
        
        <header class="p-4 border-b border-gray-200 bg-indigo-600 text-white flex items-center">
            <div class="h-10 w-10 bg-white rounded-full flex items-center justify-center mr-3">
                <span class="text-xl font-bold text-indigo-600">ðŸ¤–</span>
            </div>
            <div>
                <h3 class="font-semibold text-lg">Asistente Gemini</h3>
                <p class="text-sm opacity-80">Online</p>
            </div>
        </header>

        <div #chatContainer id="chat-history" class="chat-history flex-grow p-5 space-y-4 bg-gray-50">
            
            @for (message of messages; track message.localId) {
            
            <div class="flex"
                 [class.justify-end]="message.sender === 'user'" 
                 [class.justify-start]="message.sender === 'bot'">

                <div class="max-w-xs lg:max-w-md p-3 rounded-xl shadow-md"
                     
                     [class.bg-indigo-500]="message.sender === 'user'"
                     [class.text-white]="message.sender === 'user'"
                     [class.rounded-br-none]="message.sender === 'user'"
                     
                     [class.bg-gray-200]="message.sender === 'bot'"
                     [class.text-gray-800]="message.sender === 'bot'"
                     [class.rounded-tl-none]="message.sender === 'bot'">
                    
                    {{ message.text }}
                </div>
            </div>
        }
            
        </div>

        <footer class="p-4 border-t border-gray-200 bg-white">
            <form id="chat-form" (ngSubmit)="sendMessage()" [formGroup]="chatForm" class="flex gap-3">
                
                <input 
                    type="text" 
                    formControlName="messageInput"
                    placeholder="Escribe un nuevo mensaje..."
                    required
                    autocomplete="off"
                    class="flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 text-gray-700"
                >
                
                <button 
                    type="submit"
                    [disabled]="this.chatForm.invalid"
                    class="w-12 h-12 flex items-center justify-center text-white rounded-full transition duration-300 ease-in-out shadow-lg"
                    [class.bg-indigo-600]="this.chatForm.valid"
                    [class.hover:bg-indigo-700]="this.chatForm.valid"
                    [class.bg-gray-400]="this.chatForm.invalid"
                    [class.cursor-not-allowed]="this.chatForm.invalid"
                    title="Enviar Mensaje"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 transform rotate-90" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                    </svg>
                </button>
            </form>
        </footer>
    </div>

  </section>